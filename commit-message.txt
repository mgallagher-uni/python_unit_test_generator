[refactor] Simplify program flow with less classes

- Combined the two generator classes to simplify some code
- Gives the same results
